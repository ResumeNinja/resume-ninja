{"ast":null,"code":"import _classCallCheck from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./BoardFilling.scss';// Importing packages that will help us to transfrom a div into a pdf ,  Div --> Canvas(jpeg) --> Pdf\nimport jsPDF from'jspdf';import conf from'../../../conf/configuration';import Ad728x90 from'../../../assets/ads/728x90.png';import Ad300x50 from'../../../assets/ads/300x50.png';import MenuImg from'../../../assets/menu.png';import Canvas from'../canvas/Canvas';// Toasts\nimport Toasts from'../../Toasts/Toats';import{setResumePropertyPerUser,addEmployments,addEducations,addSkills}from'../../../firestore/dbOperations';import{IncrementDownloads}from'../../../firestore/dbOperations';// Animation Library\nimport{motion,AnimatePresence}from\"framer-motion\";var BoardFilling=/*#__PURE__*/function(_Component){_inherits(BoardFilling,_Component);var _super=_createSuper(BoardFilling);function BoardFilling(props){var _this;_classCallCheck(this,BoardFilling);_this=_super.call(this,props);_this.state={triggerDownload:false,page:1,currentPage:1,isSuccessToastVisible:false,isDownloadToastVisible:false,count:0};_this.addPage=_this.addPage.bind(_assertThisInitialized(_this));_this.nextPage=_this.nextPage.bind(_assertThisInitialized(_this));_this.previousPage=_this.previousPage.bind(_assertThisInitialized(_this));_this.downloadEnded=_this.downloadEnded.bind(_assertThisInitialized(_this));_this.ShowToast=_this.ShowToast.bind(_assertThisInitialized(_this));_this.saveToDatabase=_this.saveToDatabase.bind(_assertThisInitialized(_this));return _this;}_createClass(BoardFilling,[{key:\"addPage\",value:function addPage(){this.setState(function(prevState,props){return{page:prevState.page+1};});}},{key:\"nextPage\",value:function nextPage(){this.setState(function(prevState,props){return{currentPage:prevState.currentPage+1};});}},{key:\"previousPage\",value:function previousPage(){this.setState(function(prevState,props){return{currentPage:prevState.currentPage-1};});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;for(var index=0;index<2;index++){setTimeout(function(){if(_this2.state.count<2){_this2.setState({count:_this2.state.count});}},1000);}}},{key:\"downloadEnded\",value:function downloadEnded(){IncrementDownloads();this.setState({triggerDownload:false});}// Showing  Toast\n},{key:\"ShowToast\",value:function ShowToast(type){var _this3=this;if(type==\"Success\"){setTimeout(function(){_this3.setState(function(prevState,props){return{isSuccessToastVisible:!prevState.isSuccessToastVisible};});},3000);this.setState(function(prevState,props){return{isSuccessToastVisible:!prevState.isSuccessToastVisible};});}if(type==\"Download\"){setTimeout(function(){_this3.setState(function(prevState,props){return{triggerDownload:true,isDownloadToastVisible:!prevState.isDownloadToastVisible};});},8000);this.setState(function(prevState,props){return{isDownloadToastVisible:!prevState.isDownloadToastVisible};});}}// Saving into database But first we check which field has been edited to avoid unecessary writes in  database\n},{key:\"saveToDatabase\",value:function saveToDatabase(){var numberOfInputs=0;if(!localStorage.getItem(\"currentResumeItem\")){this.currentResume={};}else{this.currentResume=JSON.parse(localStorage.getItem(\"currentResumeItem\"));}if(this.currentResume.firstname!==this.props.values.firstname||this.currentResume.firstname==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"firstname\",this.props.values.firstname);}if(this.currentResume.lastname!==this.props.values.lastname||this.currentResume.lastname==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"lastname\",this.props.values.lastname);}if(this.currentResume.email!==this.props.values.email||this.currentResume.email==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"email\",this.props.values.email);}if(this.currentResume.phone!==this.props.values.phone||this.currentResume.phone==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"phone\",this.props.values.phone);}if(this.currentResume.occupation!==this.props.values.occupation||this.currentResume.occupation==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"occupation\",this.props.values.occupation);}if(this.currentResume.country!==this.props.values.country||this.currentResume.country==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"country\",this.props.values.country);}if(this.currentResume.city!==this.props.values.city||this.currentResume.city==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"city\",this.props.values.city);}if(this.currentResume.address!==this.props.values.address||this.currentResume.address==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"address\",this.props.values.address);}if(this.currentResume.postalcode!==this.props.values.postalcode||this.currentResume.postalcode==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"postalcode\",this.props.values.postalcode);}if(this.currentResume.dateofbirth!==this.props.values.dateofbirth||this.currentResume.dateofbirth==undefined){console.log(\"dateofbirth need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"dateofbirth\",this.props.values.dateofbirth);}if(this.currentResume.drivinglicense!==this.props.values.drivinglicense||this.currentResume.drivinglicense==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"drivinglicense\",this.props.values.drivinglicense);}if(this.currentResume.nationality!==this.props.values.nationality||this.currentResume.nationality==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"nationality\",this.props.values.nationality);}if(this.currentResume.summary!==this.props.values.summary||this.currentResume.summary==undefined){console.log(\"Firstname need to be changed in database\");setResumePropertyPerUser(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),\"summary\",this.props.values.summary);}// Adding employments\naddEmployments(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),this.props.values.employments);// adding educations if presented\naddEducations(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),this.props.values.educations);// adding skills if presented\naddSkills(localStorage.getItem(\"user\"),localStorage.getItem(\"currentResumeId\"),this.props.values.skills);this.ShowToast(\"Success\");}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"board\"},/*#__PURE__*/React.createElement(AnimatePresence,null,this.state.isSuccessToastVisible&&/*#__PURE__*/React.createElement(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},/*#__PURE__*/React.createElement(Toasts,{type:\"Success\"}))),/*#__PURE__*/React.createElement(AnimatePresence,null,this.state.isDownloadToastVisible&&/*#__PURE__*/React.createElement(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},/*#__PURE__*/React.createElement(Toasts,{type:\"Download\"}))),/*#__PURE__*/React.createElement(\"div\",{id:\"cv\",className:\"cv\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cvWrapper\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"pagination\"},/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return _this4.previousPage();}},\" previous \"),/*#__PURE__*/React.createElement(\"li\",null,\"1 / \",this.state.page),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return _this4.nextPage();}},\" next \")),/*#__PURE__*/React.createElement(\"div\",{id:\"Resume\"},/*#__PURE__*/React.createElement(Canvas,{currentResumeName:this.props.currentResumeName,initialisePages:this.initialisePages,currentPage:this.state.currentPage,pages:this.state.page,addPage:this.addPage,downloadEnded:this.downloadEnded,triggerDownload:this.state.triggerDownload,values:this.props.values})),/*#__PURE__*/React.createElement(\"div\",{className:\"cvAction\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this4.props.stepBack();},className:\"selectTemplateLink\"},\" \",/*#__PURE__*/React.createElement(\"img\",{src:MenuImg}),\" Select Template\"),/*#__PURE__*/React.createElement(\"div\",null,localStorage.getItem(\"user\")&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this4.saveToDatabase();},style:{fontSize:\"15px\"},className:\"btn-default\"},\"Save as draft\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this4.ShowToast(\"Download\");},style:{fontSize:\"15px\"},className:\"btn-default\"},\"Download\"))))));}}]);return BoardFilling;}(Component);export default BoardFilling;","map":null,"metadata":{},"sourceType":"module"}