{"ast":null,"code":"import _classCallCheck from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./DashboardMain.scss';import conf from'../../../conf/configuration';import logo from'../../../assets/logo/logo.png';import{Link}from'react-router-dom';import Toasts from'../../Toasts/Toats';import Stats from'../stats/stats';import fire from'../../../conf/fire';// Components\nimport ResumeList from'../ResumesList/ResumesList';import ProfileDropDown from'../ProfileDropdown/ProfileDropdown';import Settings from'../Settings/Settings';// Images\nimport userImage from'../../../assets/user.png';import arrow from'../../../assets/arrow.png';import{getFullName,getAds}from'../../../firestore/dbOperations';// Animation Library\nimport{motion,AnimatePresence,transform}from\"framer-motion\";var DashboardMain=/*#__PURE__*/function(_Component){_inherits(DashboardMain,_Component);var _super=_createSuper(DashboardMain);function DashboardMain(props){var _this;_classCallCheck(this,DashboardMain);_this=_super.call(this,props);_this.authListener=_this.authListener.bind(_assertThisInitialized(_this));_this.state={user:null,role:\"user\",firstname:\"\",lastname:\"\",isDeleteToastShowed:false,isDropdownShowed:false,isCommingSoonShowed:false,isSettingsShowed:false,isDashboardShowed:true};_this.dropdownHandler=_this.dropdownHandler.bind(_assertThisInitialized(_this));_this.handleCoverLetter=_this.handleCoverLetter.bind(_assertThisInitialized(_this));_this.showDeletedToast=_this.showDeletedToast.bind(_assertThisInitialized(_this));_this.settingsClickHandler=_this.settingsClickHandler.bind(_assertThisInitialized(_this));_this.handleDashboardClick=_this.handleDashboardClick.bind(_assertThisInitialized(_this));_this.logout=_this.logout.bind(_assertThisInitialized(_this));return _this;}_createClass(DashboardMain,[{key:\"componentWillMount\",value:function componentWillMount(){this.authListener();}/// Check if the user is authenticated\n},{key:\"authListener\",value:function authListener(){var _this2=this;fire.auth().onAuthStateChanged(function(user){if(user){_this2.setState({user:user.uid});getFullName(user.uid).then(function(value){value!==undefined&&_this2.setState({firstname:value.firstname,lastname:value.lastname});});localStorage.setItem('user',user.uid);/// Checking if user ad\nif(user.email===conf.adminEmail){_this2.setState({role:\"admin\"});getAds();}}else{_this2.setState({user:null});localStorage.removeItem(\"user\");}});}// Show Drop down\n},{key:\"dropdownHandler\",value:function dropdownHandler(){this.setState(function(prevState,props){return{isDropdownShowed:!prevState.isDropdownShowed};});}// Handle Settings Click\n},{key:\"settingsClickHandler\",value:function settingsClickHandler(){this.setState(function(prevState,props){return{isSettingsShowed:!prevState.isSettingsShowed};});}// Handle Settings Click\n},{key:\"handleDashboardClick\",value:function handleDashboardClick(){this.setState(function(prevState,props){return{isSettingsShowed:false,isDashboardShowed:true};});}// Logout \n},{key:\"logout\",value:function logout(){fire.auth().signOut();localStorage.removeItem(\"currentResumeId\");localStorage.removeItem(\"currentResumeItem\");this.currentResume=null;}// Handling cover letter click to show coming soon message\n},{key:\"handleCoverLetter\",value:function handleCoverLetter(){var _this3=this;setTimeout(function(){_this3.setState(function(prevStat,props){return{isCommingSoonShowed:!prevStat.isCommingSoonShowed};});},2000);this.setState(function(prevStat,props){return{isCommingSoonShowed:!prevStat.isCommingSoonShowed};});}// Show deleted toast\n},{key:\"showDeletedToast\",value:function showDeletedToast(){var _this4=this;setTimeout(function(){_this4.setState(function(prevState,props){return{isDeleteToastShowed:!prevState.isDeleteToastShowed};});},2000);this.setState(function(prevState,props){return{isDeleteToastShowed:!prevState.isDeleteToastShowed};});}},{key:\"render\",value:function render(){var _this5=this;return this.state.user!==null?/*#__PURE__*/React.createElement(\"div\",{className:\"dashboardWrapper\"},/*#__PURE__*/React.createElement(AnimatePresence,null,this.state.isDeleteToastShowed&&/*#__PURE__*/React.createElement(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},/*#__PURE__*/React.createElement(Toasts,{type:\"Delete\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"navbar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"brand\"},conf.brand.useImg?/*#__PURE__*/React.createElement(\"img\",{src:logo}):/*#__PURE__*/React.createElement(\"span\",null,\" \",conf.brand.name,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"dashboardNavigaitionList\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\" \",/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"dashboardNavItem\"},\"Homepage\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return _this5.handleDashboardClick();},className:\"dashboardNavItem dashboardNavItemActive\"},\"Dashboard\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return _this5.handleCoverLetter();},className:\"dashboardNavItem\"},\"Cover Letter\"),/*#__PURE__*/React.createElement(AnimatePresence,null,this.state.isCommingSoonShowed&&/*#__PURE__*/React.createElement(motion.a,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"statusSoon\"},\"Comming soon\"))))),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return _this5.dropdownHandler();},className:\"dashboarProfile\"},/*#__PURE__*/React.createElement(\"img\",{className:\"dashboarProfileImage\",src:userImage,alt:\"profile Image\"}),/*#__PURE__*/React.createElement(\"a\",{className:\"dashboarProfileName\"},this.state.firstname===\"\"||this.state.lastname===\"\"||this.state.lastname===undefined||this.state.firstname===\"\"?\"Welcome Back\":this.state.firstname+\" \"+this.state.lastname,\" \",/*#__PURE__*/React.createElement(\"img\",{src:arrow,alt:\"toggler\"})),/*#__PURE__*/React.createElement(AnimatePresence,null,this.state.isDropdownShowed&&/*#__PURE__*/React.createElement(motion.div,{transition:{duration:0.3},initial:{translateX:400},animate:{translateX:0},exit:{translateX:400},className:\"dashboardDropdown\"},/*#__PURE__*/React.createElement(ProfileDropDown,{handleDashboardClick:this.handleDashboardClick,handleSettingsClick:this.settingsClickHandler,logout:this.logout}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"dashboardContentWrapper\"},this.state.role===\"admin\"&&/*#__PURE__*/React.createElement(Stats,null),!this.state.isSettingsShowed?/*#__PURE__*/React.createElement(ResumeList,{showDeletedToast:this.showDeletedToast}):/*#__PURE__*/React.createElement(Settings,{role:this.state.role,firstname:this.state.firstname,lastname:this.state.lastname,uid:this.state.user}))):\"  \";}}]);return DashboardMain;}(Component);export default DashboardMain;","map":null,"metadata":{},"sourceType":"module"}