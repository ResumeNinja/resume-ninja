{"ast":null,"code":"import _classCallCheck from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pulkitkhanna/Downloads/resumen-01/codecanyon-28990151-resumen-multistep-resume-builder/ResumeN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./Welcome.scss';import Board from'../Boards/board/board';import Action from'../Actions/action/Action';import{CSSTransition}from'react-transition-group';import{Analytics}from'../Analytics';// Models \nimport EmploymentModel from'../../models/Employment';import EducationModel from'../../models/Education';import LanguageModel from'../../models/Language';import SkillModel from'../../models/Skills';// Images \nimport PreviewImg from'../../assets/preview.png';import NextImg from'../../assets/next.png';// Firebase\nimport fire from'../../conf/fire';import{InitialisationCheck}from'../../firestore/dbOperations';// Initialisation Component\nimport InitialisationWrapper from'../initailisation/initialisationWrapper/initialisationWrapper';/// Animation Library\nimport{motion,AnimatePresence}from\"framer-motion\";// This class is the source of truth. means that we will hold input states here \nvar Welcome=/*#__PURE__*/function(_Component){_inherits(Welcome,_Component);var _super=_createSuper(Welcome);function Welcome(props){var _this;_classCallCheck(this,Welcome);_this=_super.call(this,props);// This is the Parent Component that will contains all the data ( state )  of all its child component\n// From Here we will pass data to our Board Component ( Where resume is)\n_this.steps=[\"Introduction\",\"Template Selection\",\"Adding Data\"];_this.currentResume=JSON.parse(localStorage.getItem(\"currentResumeItem\"));/// Removing any nulls in the arrays of current resume\nif(_this.currentResume!==null){_this.currentResume.employments=_this.checkForNullsInArray(_this.currentResume.employments,null);_this.currentResume.educations=_this.checkForNullsInArray(_this.currentResume.educations,null);_this.currentResume.skills=_this.checkForNullsInArray(_this.currentResume.skills,null);}_this.state={mobilePreviewOn:true,isMobileTogglerShowed:true,stepIndex:0,currentStep:_this.steps[0],user:null,redirect:null,resumeName:\"Cv4\",currentResumeName:\"Cv4\",currentResume:null,title:'Untitled',progress:0,firstname:_this.currentResume!=null&&_this.currentResume.item.firstname!==undefined?_this.currentResume.item.firstname:\"\",lastname:_this.currentResume!==null&&_this.currentResume.item.lastname!==undefined?_this.currentResume.item.lastname:\"\",email:_this.currentResume!==null&&_this.currentResume.item.email!==undefined?_this.currentResume.item.email:\"\",phone:_this.currentResume!==null&&_this.currentResume.item.phone!==undefined?_this.currentResume.item.phone:\"\",occupation:_this.currentResume!==null&&_this.currentResume.item.occupation!==undefined?_this.currentResume.item.occupation:\"\",country:_this.currentResume!==null&&_this.currentResume.item.country!==undefined?_this.currentResume.item.country:\"\",city:_this.currentResume!==null&&_this.currentResume.item.city!==undefined?_this.currentResume.item.city:\"\",address:_this.currentResume!==null&&_this.currentResume.item.address!==undefined?_this.currentResume.item.address:\"\",postalcode:_this.currentResume!==null&&_this.currentResume.item.postalcode!==undefined?_this.currentResume.item.postalcode:\"\",dateofbirth:_this.currentResume!==null&&_this.currentResume.item.dateofbirth!==undefined?_this.currentResume.item.dateofbirth:\"\",drivinglicense:_this.currentResume!==null&&_this.currentResume.item.drivinglicense!==undefined?_this.currentResume.item.drivinglicense:\"\",nationality:_this.currentResume!==null&&_this.currentResume.item.nationality!==undefined?_this.currentResume.item.nationality:\"\",summary:_this.currentResume!==null&&_this.currentResume.item.summary!==undefined?_this.currentResume.item.summary:\"\",photo:null,employments:_this.currentResume!==null&&_this.currentResume.employments!==undefined?_this.currentResume.employments:[],educations:_this.currentResume!==null&&_this.currentResume.educations!==undefined?_this.currentResume.educations:[],languages:[],isInitialisationShowed:false,skills:_this.currentResume!==null&&_this.currentResume.skills!==undefined?_this.currentResume.skills:[],filledInputs:[]};_this.authListener=_this.authListener.bind(_assertThisInitialized(_this));_this.nextStep=_this.nextStep.bind(_assertThisInitialized(_this));_this.logout=_this.logout.bind(_assertThisInitialized(_this));_this.handleInputs=_this.handleInputs.bind(_assertThisInitialized(_this));_this.setCurrentStep=_this.setCurrentStep.bind(_assertThisInitialized(_this));_this.handlePreviewToggle=_this.handlePreviewToggle.bind(_assertThisInitialized(_this));_this.createNewEmploymentObject=_this.createNewEmploymentObject.bind(_assertThisInitialized(_this));_this.createNewEducationObject=_this.createNewEducationObject.bind(_assertThisInitialized(_this));_this.createNewSkillObject=_this.createNewSkillObject.bind(_assertThisInitialized(_this));_this.handleDelete=_this.handleDelete.bind(_assertThisInitialized(_this));_this.changeSelectedResume=_this.changeSelectedResume.bind(_assertThisInitialized(_this));_this.stepBack=_this.stepBack.bind(_assertThisInitialized(_this));_this.closeInitialisation=_this.closeInitialisation.bind(_assertThisInitialized(_this));_this.checkForNullsInArray=_this.checkForNullsInArray.bind(_assertThisInitialized(_this));_this.wrapper=React.createRef();_this.goThirdStep=_this.goThirdStep.bind(_assertThisInitialized(_this));// Triggering analytics initializer with the page the visitor is in\nvar AnalyticsObject=Analytics;AnalyticsObject(\"Homepage\");return _this;}/// Checking if  user is singed in\n_createClass(Welcome,[{key:\"authListener\",value:function authListener(){var _this2=this;fire.auth().onAuthStateChanged(function(user){if(user){_this2.setState({user:user});localStorage.setItem('user',user.uid);}else{_this2.setState({user:null});localStorage.removeItem(\"user\");}});}// Logout\n},{key:\"logout\",value:function logout(){fire.auth().signOut();localStorage.removeItem(\"currentResumeId\");localStorage.removeItem(\"currentResumeItem\");this.currentResume=null;}// Setting the current step\n},{key:\"setCurrentStep\",value:function setCurrentStep(step,isLoginModalShowed){this.setState({currentStep:this.steps[0],stepIndex:0});}// go to third step\n},{key:\"goThirdStep\",value:function goThirdStep(){this.setState({currentStep:this.steps[2],stepIndex:2});}// Removing any null in employments\n},{key:\"checkForNullsInArray\",value:function checkForNullsInArray(array,elem){var nullIndex=array.indexOf(elem);while(nullIndex>-1){array.splice(nullIndex,1);nullIndex=array.indexOf(elem);}return array;}},{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"componentWillMount\",value:function componentWillMount(){var _this3=this;this.authListener();InitialisationCheck().then(function(value){if(value===\"none\"||value===undefined){_this3.setState({isInitialisationShowed:true});}});// checking if the user clicked in a resume in dashboard, to set it as the current resume\nif(localStorage.getItem(\"currentResumeItem\")){this.setState({currentResume:JSON.parse(localStorage.getItem(\"currentResumeItem\"))});}/// check if the user comming from dashboard with specefic resume click\nthis.props.match!==undefined&&this.props.match.params.step!==undefined&&this.setState({currentStep:this.steps[2]});}// Basic Function to remove value from array\n},{key:\"arrayRemove\",value:function arrayRemove(arr,value){return arr.filter(function(ele){return ele!==value;});}// Handling navigation between Board steps\n},{key:\"nextStep\",value:function nextStep(){var _this4=this;this.setState(function(state){return{stepIndex:state.stepIndex+1,currentStep:_this4.steps[state.stepIndex+1],mobilePreviewOn:false};});}},{key:\"closeInitialisation\",value:function closeInitialisation(){this.setState(function(prevState,props){return{isInitialisationShowed:false};});}// stepBack\n},{key:\"stepBack\",value:function stepBack(){var _this5=this;this.setState(function(state){return{stepIndex:state.stepIndex-1,currentStep:_this5.steps[state.stepIndex-1],mobilePreviewOn:true};});}// Create new employment object\n},{key:\"createNewEmploymentObject\",value:function createNewEmploymentObject(id){var employment=new EmploymentModel(id);this.state.employments.push(employment);this.setState({employments:this.state.employments});}// Create new education object\n},{key:\"createNewEducationObject\",value:function createNewEducationObject(id){var education=new EducationModel(id);this.state.educations.push(education);this.setState({educations:this.state.educations});}// Create new education object\n},{key:\"createNewLanguageObject\",value:function createNewLanguageObject(id){var language=new LanguageModel(id);this.state.languages.push(language);this.setState({languages:this.state.languages});}// Create new skill object\n},{key:\"createNewSkillObject\",value:function createNewSkillObject(id){var skill=new SkillModel(id);this.state.skills.push(skill);this.setState({skills:this.state.skills});}// Handling Delete of a components/object Employment,Language,Education etc\n},{key:\"handleDelete\",value:function handleDelete(inputType,id){switch(inputType){case\"Skills\":this.setState({skills:[]});break;default:break;}}// Handling Inputs change from childs\n},{key:\"handleInputs\",value:function handleInputs(inputName,inputValue,idOptional,typeOptional){var _this6=this;// switching between which input is passed to the function\n// typeOptional if the input was in employment or education or langauge \n// idOptional is an optional id when an input is inside another component like employments\n//  Each employment should contain id and when an input changed inside Employment component we need to \n// know the id of that specefic employment to change it in here  same applicable for educations languages \nswitch(inputName){case\"Title\":this.setState({title:inputValue});break;case\"First Name\":this.setState({firstname:inputValue});break;case\"Last Name\":this.setState({lastname:inputValue});break;case\"Email\":this.setState({email:inputValue});break;case\"Phone\":this.setState({phone:inputValue});break;case\"Photo\":var image=new window.Image();image.src=inputValue;image.onload=function(){_this6.setState({photo:image});};break;case\"Occupation\":this.setState({occupation:inputValue});break;case\"Country\":this.setState({country:inputValue});break;case\"City\":this.setState({city:inputValue});break;case\"Address\":this.setState({address:inputValue});break;case\"Postal Code\":this.setState({postalcode:inputValue});break;case\"Date Of Birth\":this.setState({dateofbirth:inputValue});break;case\"Driving License\":this.setState({drivinglicense:inputValue});break;case\"Nationality\":this.setState({nationality:inputValue});break;case\"Professional Summary\":this.setState({summary:inputValue});break;case\"Job Title\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nvar found=false;// looping in state to see if its found based on the id raised from the components\nfor(var i=0;i<this.state.employments.length;i++){if(this.state.employments[i]!==null&&this.state.employments[i].id===idOptional&&typeOptional===\"Employment\"){found=true;this.state.employments[i].jobTitle=inputValue;this.setState({employments:this.state.employments});break;}}if(found===false){// create new employment\nthis.createNewEmploymentObject(idOptional);}found=false;break;case\"Begin\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.employments.length;i++){if(this.state.employments[i]!==null&&this.state.employments[i].id===idOptional&&typeOptional===\"Employment\"){found=true;this.state.employments[i].begin=inputValue;this.setState({employments:this.state.employments});break;}}if(found===false){// create new employment\nthis.createNewEmploymentObject(idOptional);}found=false;break;case\"End\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.employments.length;i++){if(this.state.employments[i]!==null&&this.state.employments[i].id===idOptional&&typeOptional===\"Employment\"){found=true;this.state.employments[i].end=inputValue;this.setState({employments:this.state.employments});break;}}if(found===false){// create new employment\nthis.createNewEmploymentObject(idOptional);}found=false;break;case\"Employer\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.employments.length;i++){if(this.state.employments[i]!==null&&this.state.employments[i].id===idOptional&&typeOptional===\"Employment\"){found=true;this.state.employments[i].employer=inputValue;this.setState({employments:this.state.employments});break;}}if(found===false){// create new employment\nthis.createNewEmploymentObject(idOptional);}found=false;break;case\"Description\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.employments.length;i++){if(this.state.employments[i]!==null&&this.state.employments[i].id===idOptional&&typeOptional===\"Employment\"){found=true;this.state.employments[i].description=inputValue;this.setState({employments:this.state.employments});break;}}if(found===false){// create new employment\nthis.createNewEmploymentObject(idOptional);}found=false;break;case\"School\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.educations.length;i++){if(this.state.educations[i]!==null&&this.state.educations[i].id===idOptional&&typeOptional===\"Education\"){found=true;this.state.educations[i].school=inputValue;this.setState({educations:this.state.educations});break;}}if(found===false){// create new employment\nthis.createNewEducationObject(idOptional);}found=false;break;case\"Degree\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.educations.length;i++){if(this.state.educations[i]!==null&&this.state.educations[i].id===idOptional&&typeOptional===\"Education\"){found=true;this.state.educations[i].degree=inputValue;this.setState({educations:this.state.educations});break;}}if(found===false){// create new employment\nthis.createNewEducationObject(idOptional);}found=false;break;case\"Started\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.educations.length;i++){if(this.state.educations[i].id===idOptional&&typeOptional===\"Education\"){found=true;this.state.educations[i].started=inputValue;this.setState({educations:this.state.educations});break;}}if(found===false){// create new employment\nthis.createNewEducationObject(idOptional);}found=false;break;case\"Finished\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.educations.length;i++){if(this.state.educations[i].id===idOptional&&typeOptional===\"Education\"){found=true;this.state.educations[i].finished=inputValue;this.setState({educations:this.state.educations});break;}}if(found===false){// create new employment\nthis.createNewEducationObject(idOptional);}found=false;break;case\"Course Description\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.educations.length;i++){if(this.state.educations[i].id===idOptional&&typeOptional===\"Education\"){found=true;this.state.educations[i].description=inputValue;this.setState({educations:this.state.educations});break;}}if(found===false){// create new employment\nthis.createNewEducationObject(idOptional);}found=false;break;case\"Language\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.languages.length;i++){if(this.state.languages[i].id===idOptional&&typeOptional===\"Languages\"){found=true;this.state.languages[i].name=inputValue;this.setState({languages:this.state.languages});break;}}if(found===false){// create new Language\nthis.createNewLanguageObject(idOptional);}found=false;break;case\"Level\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.languages.length;i++){if(this.state.languages[i].id===idOptional&&typeOptional===\"Languages\"){found=true;this.state.languages[i].level=inputValue;this.setState({languages:this.state.languages});break;}}if(found===false){// create new Language\nthis.createNewLanguageObject(idOptional);}found=false;break;case\"Skill Name\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.skills.length;i++){if(this.state.skills[i].id===idOptional&&typeOptional===\"Skills\"){found=true;this.state.skills[i].name=inputValue;this.setState({skills:this.state.skills});break;}}if(found===false){// create new Language\nthis.createNewSkillObject(idOptional);}found=false;break;case\"Rating\":/// Check if we have any employment with th id \n// Boolean to check if the employment is already in state\nfound=false;// looping in state to see if its found based on the id raised from the components\nfor(i=0;i<this.state.skills.length;i++){if(this.state.skills[i].id===idOptional&&typeOptional===\"Skills\"){found=true;this.state.skills[i].rating=inputValue;this.setState({skills:this.state.skills});break;}}if(found===false){// create new Language\nthis.createNewSkillObject(idOptional);}found=false;break;default:break;}}// Handling Preview Button\n},{key:\"handlePreviewToggle\",value:function handlePreviewToggle(){this.state.mobilePreviewOn?this.setState({mobilePreviewOn:false}):this.setState({mobilePreviewOn:true});this.state.currentStep==\"Introduction\"?this.setState({isMobileTogglerShowed:false}):this.setState({isMobileTogglerShowed:true});}// Changing the selected resume\n},{key:\"changeSelectedResume\",value:function changeSelectedResume(resumeName){this.setState({resumeName:resumeName,// Propertie\ncurrentResumeName:resumeName});}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.location!==this.props.location){// alert(nextProps.location);\n}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper\"},/*#__PURE__*/React.createElement(AnimatePresence,null,this.state.isInitialisationShowed&&/*#__PURE__*/React.createElement(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},/*#__PURE__*/React.createElement(InitialisationWrapper,{closeInitialisation:this.closeInitialisation}),\"  \")),/*#__PURE__*/React.createElement(\"div\",{className:\"actions\"},/*#__PURE__*/React.createElement(Action,{goThirdStep:this.goThirdStep,values:{user:this.state.user,resumeName:this.state.resumeName,title:this.state.title,firstname:this.state.firstname,lastname:this.state.lastname,summary:this.state.summary,occupation:this.state.occupation,address:this.state.address,postalcode:this.state.postalcode,country:this.state.country,dateofbirth:this.state.dateofbirth,city:this.state.city,email:this.state.email,phone:this.state.phone,employments:this.state.employments,drivinglicense:this.state.drivinglicense,nationality:this.state.nationality,educations:this.state.educations,languages:this.state.languages,skills:this.state.skills,photo:this.state.photo},setCurrentStep:this.setCurrentStep,redirectToDashboard:this.redirectToDashboard,logout:this.logout,user:this.state.user,handlePreviewToggle:this.handlePreviewToggle,handleDelete:this.handleDelete,progress:this.state.progress,currentStep:this.state.currentStep,handleInputs:this.handleInputs})),/*#__PURE__*/React.createElement(\"div\",{className:this.state.mobilePreviewOn?\" right-panel  boardShowed\":\"right-panel \"},/*#__PURE__*/React.createElement(Board,{nextStep:this.nextStep,stepBack:this.stepBack,changeResumeName:this.changeSelectedResume,currentResumeName:this.state.resumeName,values:{resumeName:this.state.resumeName,title:this.state.title,firstname:this.state.firstname,lastname:this.state.lastname,summary:this.state.summary,occupation:this.state.occupation,address:this.state.address,postalcode:this.state.postalcode,country:this.state.country,city:this.state.city,dateofbirth:this.state.dateofbirth,drivinglicense:this.state.drivinglicense,email:this.state.email,nationality:this.state.nationality,phone:this.state.phone,employments:this.state.employments,educations:this.state.educations,languages:this.state.languages,skills:this.state.skills,photo:this.state.photo},currentStep:this.state.currentStep})),/*#__PURE__*/React.createElement(CSSTransition,{appear:true,in:true,timeout:100,classNames:\"previewfade\"},this.state.isMobileTogglerShowed?/*#__PURE__*/React.createElement(\"div\",{onClick:this.handlePreviewToggle,className:\"previewButton\"},/*#__PURE__*/React.createElement(\"img\",{className:\"previewImg\",src:this.state.currentStep==\"Introduction\"?NextImg:PreviewImg,alt:\"Preview\"})):/*#__PURE__*/React.createElement(\"div\",null)));}}]);return Welcome;}(Component);export default Welcome;","map":null,"metadata":{},"sourceType":"module"}